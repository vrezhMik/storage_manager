(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{8545:function(e,t,n){Promise.resolve().then(n.bind(n,1618))},4189:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3Z"}),(0,r.jsx)("circle",{cx:"12",cy:"13",r:"3"})]})}},6652:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:(0,r.jsx)("path",{d:"m15 18-6-6 6-6"})})}},1463:function(e,t,n){"use strict";var r=n(7437);n(2265),t.Z=function(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-key-round h-4 w-4","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}),(0,r.jsx)("circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"})]})}},3746:function(e,t,n){"use strict";var r=n(7437);n(2265),t.Z=function(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-log-out h-4 w-4","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,r.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,r.jsx)("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]})}},3602:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:(0,r.jsx)("path",{d:"M5 12h14"})})}},6023:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M5 12h14"}),(0,r.jsx)("path",{d:"M12 5v14"})]})}},5495:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),(0,r.jsx)("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),(0,r.jsx)("path",{d:"M7 3v4a1 1 0 0 0 1 1h7"})]})}},3587:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),(0,r.jsx)("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),(0,r.jsx)("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),(0,r.jsx)("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"})]})}},84:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}),(0,r.jsx)("path",{d:"m21.854 2.147-10.94 10.939"})]})}},1618:function(e,t,n){"use strict";n.d(t,{default:function(){return p}});var r=n(7437),s=n(2265),i=n(4364),o=n(6463),a=n(4189),c=n(6652),l=n(1463),d=n(3746),u=n(3602),x=n(6023),f=n(5495),h=n(84),v=n(3587);let m=[{id:"001234",date:"15.05.2024",title:"ՀՀ Առողջապահության նախարարություն"},{id:"001235",date:"16.05.2024",title:"Արմենիա ՍՊԸ"},{id:"001236",date:"17.05.2024",title:"Սիլ-Կո ՌՓԲԸ"}],g=[{code:"MED-2024-003",desc:"Վիրակապի նյութեր",location:"C-15-03",total:3,current:0,stock:15},{code:"9785353004325",desc:"Book barcode test",location:"Test",total:1,current:0,stock:5}];function p(e){let{params:t}=e,n=(0,o.useRouter)();(0,s.useMemo)(()=>m.find(e=>e.id===t.id),[t.id]);let[p,b]=(0,s.useState)("manual"),[w,j]=(0,s.useState)(g),k=(0,s.useRef)(g),y=(0,s.useRef)(null),N=(0,s.useRef)(null),_=(0,s.useRef)(null),M=(0,s.useRef)(null),C=(0,s.useRef)(null),Z=(0,s.useRef)(null),[L,z]=(0,s.useState)(null),[B,R]=(0,s.useState)(null),V=(0,s.useRef)({}),E=(0,s.useRef)(null),[S,W]=(0,s.useState)(null),T=(0,s.useRef)(null),D=(0,s.useMemo)(()=>"out-order-".concat(t.id),[t.id]),A=(e,t)=>e<t?"text-muted-foreground":e===t?"text-[hsl(var(--success))]":"text-[hsl(var(--destructive))]";(0,s.useEffect)(()=>{{let e=window.localStorage.getItem(D);if(e)try{let t=JSON.parse(e);Array.isArray(t)&&(j(t),k.current=t)}catch(e){}}},[D]),(0,s.useEffect)(()=>{let e=e=>{let t=e.trim();if(!t)return;let n=Date.now();if(!E.current||E.current.code!==t||!(n-E.current.time<1e3)){if(z(t),k.current.find(e=>e.code===t)){R(null),O(t,1),W(t),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>W(null),1200);let e=V.current[t];e&&e.scrollIntoView({behavior:"smooth",block:"center"}),b("manual")}else R("Բարկոդը չի գտնվել ապրանքների ցանկում");E.current={code:t,time:n}}},t=async()=>{if("BarcodeDetector"in window)try{let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}});N.current=t,y.current&&(y.current.srcObject=t,await y.current.play()),await r(e)}catch(e){R("Բարկոդ ընթերցումը հասանելի չէ այս սարքում")}else await n(e)},n=async e=>{if(!y.current)return;let t=new i.VJ;_.current=t;try{let n=await t.decodeFromVideoDevice(void 0,y.current,(t,n)=>{(null==t?void 0:t.getText())?e(t.getText()):n&&"NotFoundException"!==n.name&&R("Չհաջողվեց ընթերցել բարկոդը")});M.current=n}catch(e){R("Բարկոդ ընթերցումը հասանելի չէ այս սարքում")}},r=async e=>{if(!("BarcodeDetector"in window))return;Z.current||(Z.current=new BarcodeDetector({formats:["code_128","ean_13","ean_8","qr_code"]}));let t=async()=>{if(y.current&&Z.current){try{let t=await Z.current.detect(y.current);if(t.length>0){var n;let r=null!==(n=t[0].rawValue)&&void 0!==n?n:"";e(r)}}catch(e){R("Չհաջողվեց ընթերցել բարկոդը")}C.current=requestAnimationFrame(t)}};t()},s=()=>{var e;C.current&&(cancelAnimationFrame(C.current),C.current=null),(null===(e=M.current)||void 0===e?void 0:e.stop)&&(M.current.stop(),M.current=null),N.current&&(N.current.getTracks().forEach(e=>e.stop()),N.current=null),y.current&&(y.current.srcObject=null),Z.current=null,z(null),R(null),E.current=null,T.current&&(clearTimeout(T.current),T.current=null)};return"camera"===p?t():s(),s},[p]);let O=(e,t)=>{j(n=>{let r=n.map(n=>{if(n.code!==e)return n;let r=t>0?t:0,s=t<0?Math.min(Math.abs(t),n.current):0,i=Math.max(0,n.current+r-s),o="number"==typeof n.stock?Math.max(0,n.stock+r-s):n.stock;return{...n,current:i,stock:o}});return k.current=r,r})};return(0,s.useEffect)(()=>{k.current=w},[w]),(0,r.jsxs)("div",{className:"App",children:[(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-border bg-card shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>n.push("/documents/out"),className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("h1",{className:"text-lg font-semibold text-foreground",children:["Պատվեր № ",t.id]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})}),(0,r.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",onClick:()=>n.push("/login"),children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})]})]})}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-6 pb-20",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,r.jsx)("div",{className:"p-6 pt-6",children:(0,r.jsx)("div",{dir:"ltr","data-orientation":"horizontal",className:"w-full",children:(0,r.jsxs)("div",{role:"tablist","aria-orientation":"horizontal",className:"h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground grid w-full grid-cols-3",children:[(0,r.jsxs)("button",{type:"button",role:"tab","aria-selected":"manual"===p,"data-state":"manual"===p?"active":"inactive",onClick:()=>b("manual"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,r.jsx)(x.Z,{className:"h-3.5 w-3.5 mr-1"}),"Ձեռքով"]}),(0,r.jsxs)("button",{type:"button",role:"tab","aria-selected":"camera"===p,"data-state":"camera"===p?"active":"inactive",onClick:()=>b("camera"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,r.jsx)(a.Z,{className:"h-3.5 w-3.5 mr-1"}),"Տեսախցիկ"]}),(0,r.jsxs)("button",{type:"button",role:"tab","aria-selected":"device"===p,"data-state":"device"===p?"active":"inactive",onClick:()=>b("device"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,r.jsx)(v.Z,{className:"h-3.5 w-3.5 mr-1"}),"Սարք"]})]})})})}),(0,r.jsxs)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:[(0,r.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 pb-3",children:(0,r.jsx)("div",{className:"font-semibold tracking-tight text-base",children:"Ապրանքներ"})}),(0,r.jsxs)("div",{className:"p-0 space-y-0",children:["camera"===p&&(0,r.jsxs)("div",{className:"border-b border-border bg-black/60 text-white",children:[(0,r.jsx)("video",{ref:y,className:"w-full rounded-b-xl",playsInline:!0,muted:!0}),(0,r.jsxs)("div",{className:"px-4 py-2 text-xs text-white/80 flex justify-between",children:[(0,r.jsx)("span",{children:L?"Գտնված բարկոդը: ".concat(L):"Սկանավորում..."}),B&&(0,r.jsx)("span",{className:"text-red-400",children:B})]})]}),(0,r.jsx)("div",{className:"space-y-0",children:w.map(e=>(0,r.jsxs)("div",{ref:t=>{V.current[e.code]=t},className:"p-4 space-y-3 border-b border-border last:border-none ".concat(S===e.code?"bg-success-light/40":""),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("div",{className:"text-sm font-semibold text-foreground",children:e.desc})}),(0,r.jsx)("div",{className:"flex flex-col items-end gap-1 text-xs text-muted-foreground",children:(0,r.jsx)("div",{className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 bg-muted text-muted-foreground border-border shrink-0",children:(0,r.jsxs)("span",{className:A(e.current,e.total),children:[e.current,"/",e.total]})})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Կոդ: ",e.code]}),e.location?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["Հասցե: ",e.location]})]}):null]}),"manual"===p?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",onClick:()=>O(e.code,-1),children:(0,r.jsx)(u.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex-1 text-center",children:[(0,r.jsx)("span",{className:"text-lg font-semibold ".concat(A(e.current,e.total)),children:e.current}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[" ","/ ",e.total]})]}),(0,r.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",onClick:()=>O(e.code,1),children:(0,r.jsx)(x.Z,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:[e.current," / ",e.total]})]},e.code))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,r.jsxs)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground px-4 py-2 h-12",onClick:()=>{window.localStorage.setItem(D,JSON.stringify(k.current))},children:[(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Պահպանել"]}),(0,r.jsxs)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground shadow hover:bg-[#015433]/90 px-4 py-2 h-12",children:[(0,r.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Ուղարկել 1C"]})]})]})})]}),(0,r.jsx)("section",{"aria-label":"Notifications alt+T",tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"})]})}}},function(e){e.O(0,[102,971,23,744],function(){return e(e.s=8545)}),_N_E=e.O()}]);
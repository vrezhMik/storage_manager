(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{8545:function(e,t,r){Promise.resolve().then(r.bind(r,1618))},4189:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7437);function s(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,n.jsx)("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3Z"}),(0,n.jsx)("circle",{cx:"12",cy:"13",r:"3"})]})}},3602:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7437);function s(e){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:(0,n.jsx)("path",{d:"M5 12h14"})})}},6023:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7437);function s(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,n.jsx)("path",{d:"M5 12h14"}),(0,n.jsx)("path",{d:"M12 5v14"})]})}},5495:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7437);function s(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,n.jsx)("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),(0,n.jsx)("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),(0,n.jsx)("path",{d:"M7 3v4a1 1 0 0 0 1 1h7"})]})}},3587:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7437);function s(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,n.jsx)("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),(0,n.jsx)("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),(0,n.jsx)("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),(0,n.jsx)("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"})]})}},84:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7437);function s(e){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,n.jsx)("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}),(0,n.jsx)("path",{d:"m21.854 2.147-10.94 10.939"})]})}},4771:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(7437),s=r(2265),i=r(6463),a=r(4984);let o=!1,l=!0;function c(e){let{children:t}=e,r=(0,i.useRouter)(),[c,u]=(0,s.useState)(()=>!o||l),d=(0,s.useRef)(!1);return((0,s.useEffect)(()=>{if(o||d.current)return;d.current=!0;let e=new AbortController,t=!0;return o=!0,(async()=>{try{let n=await (0,a.SH)("".concat(a.Sg,"/auth/me"),{signal:e.signal});if(!t)return;if(!n.ok){(0,a.X6)(),l=!1,r.replace("/login");return}l=!0,u(!0)}catch(e){if(!t||(null==e?void 0:e.name)==="AbortError")return;(0,a.X6)(),l=!1,r.replace("/login")}})(),()=>{t=!1}},[r]),c)?(0,n.jsx)(n.Fragment,{children:t}):null}},1618:function(e,t,r){"use strict";r.d(t,{default:function(){return h}});var n=r(7437),s=r(2265),i=r(4364),a=r(6463),o=r(4189),l=r(3602),c=r(6023),u=r(5495),d=r(84),m=r(3587),f=r(4771),x=r(4984);let v=e=>{if(!e)return;let t=new Date(e);if(Number.isNaN(t.getTime()))return e;let r=e=>e.toString().padStart(2,"0"),n=r(t.getDate()),s=r(t.getMonth()+1),i=t.getFullYear(),a=r(t.getHours()),o=r(t.getMinutes()),l=r(t.getSeconds());return"".concat(n,".").concat(s,".").concat(i," ").concat(a,":").concat(o,":").concat(l)};function h(e){let{id:t}=e,r=(0,a.useRouter)(),[h,p]=(0,s.useState)(!1),[g,b]=(0,s.useState)(void 0);(0,s.useEffect)(()=>{p(!0)},[]),(0,s.useEffect)(()=>{try{var e,r;let n=window.localStorage.getItem("orders-data");if(!n)return;let s=JSON.parse(n),i=null!=t?t:null===(e=s[0])||void 0===e?void 0:e.id,a=null!==(r=s.find(e=>e.id===i))&&void 0!==r?r:null;b(a)}catch(e){b(null)}},[t]);let w=(0,s.useMemo)(()=>"false"!==window.localStorage.getItem(x.Fv),[]),[j,y]=(0,s.useState)(()=>"false"===window.localStorage.getItem(x.Fv)?"device":"manual"),N=(0,s.useMemo)(()=>{var e;let t=null==g?void 0:null===(e=g.items)||void 0===e?void 0:e.map(e=>({code:(null==e?void 0:e.Barcode)||(null==e?void 0:e.ItemID)||"-",name:(null==e?void 0:e.Name)||(null==e?void 0:e.ItemID)||"",itemId:(null==e?void 0:e.ItemID)||"",articul:(null==e?void 0:e.Articul)||"",location:(null==e?void 0:e.ItemAddress)||"",total:Number(null==e?void 0:e.Quantity)||0,current:0,stock:0}));return t&&t.length>0?t:[]},[g]),[k,S]=(0,s.useState)(N),_=(0,s.useRef)(N),I=(0,s.useRef)(null),C=(0,s.useRef)(null),T=(0,s.useRef)(null),M=(0,s.useRef)(null),E=(0,s.useRef)(null),R=(0,s.useRef)(null),[D,Z]=(0,s.useState)(null),[L,F]=(0,s.useState)(null),[O,A]=(0,s.useState)(""),[B,V]=(0,s.useState)(null),[z,H]=(0,s.useState)(null),[W,J]=(0,s.useState)(!1),P=(0,s.useRef)(null),X=(0,s.useRef)({}),q=(0,s.useRef)(null),Q=(0,s.useRef)(!1),U=(0,s.useRef)(()=>{}),[Y,$]=(0,s.useState)(!1),[G,K]=(0,s.useState)(null),ee=(0,s.useRef)(null),et=(0,s.useRef)(""),er=(0,s.useRef)(null),en=(0,s.useRef)(null),es=(0,s.useMemo)(()=>"out-order-".concat(null!=t?t:"default"),[t]),ei=async()=>{var e,t,r;if(H(null),!g)return;let n={Number:g.id,ClientID:null!==(e=g.clientId)&&void 0!==e?e:"",TransactionDate:v(g.transactionDate||g.date),Items:k.filter(e=>e.current>0).map(e=>({ItemID:e.itemId||e.code,Quantity:e.current}))};if(0===n.Items.length){H("Առաքման համար քանակ նշված չէ");return}try{J(!0);let e=await fetch("".concat(x.Sg,"/orders"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(!e.ok){let r=await e.text().catch(()=>""),n="Չհաջողվեց ուղարկել (".concat(e.status,")");try{let e=JSON.parse(r);n=null!==(t=null==e?void 0:e.message)&&void 0!==t?t:n}catch(e){r&&(n=r)}throw Error(n)}}catch(e){H(null!==(r=null==e?void 0:e.message)&&void 0!==r?r:"Չհաջողվեց ուղարկել")}finally{J(!1)}};(0,s.useEffect)(()=>{w||"manual"!==j||y("device")},[w,j]);let ea=(0,s.useCallback)(e=>{let t=X.current[e];t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),K(e),ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>K(null),1200))},[]),eo=(0,s.useCallback)((e,t)=>{S(r=>{let n=r.map(r=>{if(r.code!==e)return r;let n=t>0?t:0,s=t<0?Math.min(Math.abs(t),r.current):0,i=Math.max(0,r.current+n-s),a="number"==typeof r.stock?Math.max(0,r.stock+n-s):r.stock;return{...r,current:i,stock:a}});return _.current=n,n})},[]),el=(0,s.useCallback)(e=>{let t=e.trim();if(!t)return;let r=_.current.find(e=>e.code===t||e.itemId===t)||null;r?(V(null),ea(r.code),eo(r.code,1)):V("Բարկոդը չի գտնվել ցանկում"),A("")},[ea,eo]);(0,s.useEffect)(()=>{"device"===j&&P.current&&P.current.focus();let e=e=>{if("device"!==j)return;e.stopPropagation();let t=e.key;if("Enter"===t){e.preventDefault();let t=et.current;et.current="",er.current&&(clearTimeout(er.current),er.current=null),en.current&&(clearTimeout(en.current),en.current=null),el(t);return}1===t.length&&(et.current+=t,er.current&&clearTimeout(er.current),er.current=setTimeout(()=>{et.current=""},600),en.current&&clearTimeout(en.current),en.current=setTimeout(()=>{let e=et.current;et.current="",e&&el(e)},900))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e),er.current&&clearTimeout(er.current),en.current&&clearTimeout(en.current)}},[j,el]);let ec=(0,s.useCallback)(e=>{if(!N.length)return null!=e?e:[];let t=new Map;return(N.forEach(e=>t.set(e.code||e.itemId,e)),e&&e.length)?e.map(e=>{var r,n;let s=e.code||e.itemId,i=s?t.get(s):void 0;return{...e,name:e.name||(null==i?void 0:i.name)||"",itemId:e.itemId||(null==i?void 0:i.itemId)||"",articul:e.articul||(null==i?void 0:i.articul)||"",location:e.location||(null==i?void 0:i.location)||"",total:null!==(n=null!==(r=null==i?void 0:i.total)&&void 0!==r?r:e.total)&&void 0!==n?n:0}}):N},[N]),eu=h&&null===g,ed=(e,t)=>e<t?"text-muted-foreground":e===t?"text-[hsl(var(--success))]":"text-[hsl(var(--destructive))]";return(0,s.useEffect)(()=>{{let e=window.localStorage.getItem(es);if(e)try{let t=JSON.parse(e);if(Array.isArray(t)){let e=ec(t);S(e),_.current=e;return}}catch(e){}}if(N.length>0){let e=ec(N);S(e),_.current=e}},[es,N,ec]),(0,s.useEffect)(()=>{let e=e=>{if(Q.current)return;let t=e.trim();if(!t)return;let r=Date.now();if(!q.current||q.current.code!==t||!(r-q.current.time<1e3)){if(Z(t),_.current.find(e=>e.code===t)){F(null),eo(t,1),K(t),ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>K(null),1200);let e=X.current[t];e&&e.scrollIntoView({behavior:"smooth",block:"center"}),Q.current=!0,setTimeout(()=>{U.current(),$(!1)},250)}else F("Բարկոդը չի գտնվել ապրանքների ցանկում");q.current={code:t,time:r}}},t=async()=>{if(C.current)return;let t="BarcodeDetector"in window,s=async()=>{try{return await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})}catch(e){return await navigator.mediaDevices.getUserMedia({video:!0})}};try{let i=await s();C.current=i,I.current&&(I.current.srcObject=i,await I.current.play()),t?await n(e):await r(e)}catch(e){console.error("Camera start failed",e),F("Տեսախցիկը չի միանում․ թույլատրեք հասանելիությունը և փորձեք կրկին")}},r=async e=>{if(!I.current)return;let t=new i.VJ;T.current=t;try{let r=await t.decodeFromVideoDevice(void 0,I.current,(t,r)=>{(null==t?void 0:t.getText())?e(t.getText()):r&&"NotFoundException"!==r.name&&F("Չհաջողվեց ընթերցել բարկոդը")});M.current=r}catch(e){console.error("Camera start failed",e),F("Բարկոդ ընթերցումը հասանելի չէ այս սարքում")}},n=async e=>{if(!("BarcodeDetector"in window))return;R.current||(R.current=new BarcodeDetector({formats:["code_128","ean_13","ean_8","qr_code"]}));let t=async()=>{if(I.current&&R.current){try{let t=await R.current.detect(I.current);if(t.length>0){var r;let n=null!==(r=t[0].rawValue)&&void 0!==r?r:"";e(n)}}catch(e){F("Չհաջողվեց ընթերցել բարկոդը")}E.current=requestAnimationFrame(t)}};t()},s=()=>{var e;E.current&&(cancelAnimationFrame(E.current),E.current=null),(null===(e=M.current)||void 0===e?void 0:e.stop)&&(M.current.stop(),M.current=null),C.current&&(C.current.getTracks().forEach(e=>e.stop()),C.current=null),I.current&&(I.current.srcObject=null),R.current=null,Z(null),F(null),q.current=null,Q.current=!1,ee.current&&(clearTimeout(ee.current),ee.current=null)};return U.current=s,"camera"===j&&Y?t():s(),s},[j,Y]),(0,s.useEffect)(()=>{_.current=k},[k]),(0,n.jsxs)(f.Z,{children:[(0,n.jsx)("div",{className:"App",children:(0,n.jsx)("main",{className:"container mx-auto px-4 py-6 pb-20",children:h&&void 0!==g?eu?(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,n.jsxs)("div",{className:"p-6 pt-6 text-center space-y-3",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:"Փաստաթուղթը չի գտնվել"}),(0,n.jsx)("p",{className:"text-muted-foreground text-sm",children:"Վերադարձեք Ելքերի ցուցակ և ընտրեք փաստաթուղթը նորից։"}),(0,n.jsx)("button",{onClick:()=>r.push("/documents/out"),className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md border border-border bg-card px-4 py-2 text-sm font-medium text-foreground shadow-sm transition-colors hover:bg-accent hover:text-accent-foreground",children:"Վերադառնալ"})]})})}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,n.jsx)("div",{className:"p-6 pt-6",children:(0,n.jsxs)("div",{dir:"ltr","data-orientation":"horizontal",className:"w-full",children:[(0,n.jsxs)("div",{role:"tablist","aria-orientation":"horizontal",className:"h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground grid w-full ".concat(w?"grid-cols-3":"grid-cols-2"),children:[w&&(0,n.jsxs)("button",{type:"button",role:"tab","aria-selected":"manual"===j,"data-state":"manual"===j?"active":"inactive",onClick:()=>y("manual"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,n.jsx)(c.Z,{className:"h-3.5 w-3.5 mr-1"}),"Ձեռքով"]}),(0,n.jsxs)("button",{type:"button",role:"tab","aria-selected":"camera"===j,"data-state":"camera"===j?"active":"inactive",onClick:()=>y("camera"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,n.jsx)(o.Z,{className:"h-3.5 w-3.5 mr-1"}),"Տեսախցիկ"]}),(0,n.jsxs)("button",{type:"button",role:"tab","aria-selected":"device"===j,"data-state":"device"===j?"active":"inactive",onClick:()=>y("device"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,n.jsx)(m.Z,{className:"h-3.5 w-3.5 mr-1"}),"Սարք"]})]}),(0,n.jsxs)("form",{className:"mt-3 flex gap-2",onSubmit:e=>{e.preventDefault(),el(O),"device"===j?setTimeout(()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.focus()},0):w&&y("manual")},children:[(0,n.jsx)("input",{ref:P,className:"flex-1 rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",placeholder:"device"===j?"Սկանավորեք սարքով":"Մուտքագրեք բարկոդը",autoFocus:"device"===j,value:O,onChange:e=>A(e.target.value)}),(0,n.jsx)("button",{type:"submit",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-2 text-sm font-medium bg-primary text-primary-foreground shadow hover:bg-primary/90",children:"Գտնել"})]}),B&&(0,n.jsx)("p",{className:"mt-2 text-xs text-red-600",children:B})]})})}),(0,n.jsxs)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:[(0,n.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 pb-3",children:(0,n.jsx)("div",{className:"font-semibold tracking-tight text-base",children:"Ապրանքներ"})}),(0,n.jsxs)("div",{className:"p-0 space-y-0",children:["camera"===j&&(0,n.jsxs)("div",{className:"relative border-b border-border bg-black/60 text-white",children:[(0,n.jsx)("div",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-black/70",children:(0,n.jsxs)("button",{type:"button",onClick:()=>$(e=>!e),className:"inline-flex items-center gap-2 rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-black shadow transition hover:scale-[1.02] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-black focus-visible:ring-yellow-400",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),Y?"Անջատել":"Միացնել տեսախցիկը"]})}),Y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("video",{ref:I,className:"w-full rounded-b-xl aspect-video object-cover bg-black",playsInline:!0,autoPlay:!0,muted:!0}),(0,n.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,n.jsx)("div",{className:"h-40 w-64 rounded-md border-2 transition-colors duration-150 ".concat(D?"border-green-400 shadow-[0_0_0_2px_rgba(34,197,94,0.35)]":"border-yellow-400 shadow-[0_0_0_2px_rgba(250,204,21,0.35)]")})})]}):(0,n.jsx)("div",{className:"w-full rounded-b-xl bg-black/80 aspect-video flex items-center justify-center text-xs text-white/70",children:"Սկսեք սկանավորումը"}),(0,n.jsxs)("div",{className:"px-4 py-2 text-xs text-white/80 flex justify-between",children:[(0,n.jsx)("span",{children:D?"Գտնված բարկոդը: ".concat(D):Y?"Սկանավորում...":"Տեսախցիկը անջատված է"}),L&&(0,n.jsx)("span",{className:"text-red-400",children:L})]})]}),(0,n.jsx)("div",{className:"space-y-0",children:k.map(e=>(0,n.jsxs)("div",{ref:t=>{X.current[e.code]=t},className:"p-4 space-y-3 border-b border-border last:border-none ".concat(G===e.code?"bg-success-light/40":""),children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsx)("div",{className:"flex-1 min-w-0",children:(0,n.jsx)("div",{className:"text-sm font-semibold text-foreground",children:e.name||e.itemId||"Անվանում չկա"})}),(0,n.jsx)("div",{className:"flex flex-col items-end gap-1 text-xs text-muted-foreground",children:(0,n.jsx)("div",{className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 bg-muted text-muted-foreground border-border shrink-0",children:(0,n.jsxs)("span",{className:ed(e.current,e.total),children:[e.current,"/",e.total]})})})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[(0,n.jsxs)("span",{children:["Կոդ: ",e.itemId||e.code]}),(0,n.jsx)("span",{children:"•"}),(0,n.jsxs)("span",{children:["Բարկոդ: ",e.code||"—"]}),e.location?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"•"}),(0,n.jsxs)("span",{children:["Հասցե: ",e.location]})]}):null,e.articul?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"•"}),(0,n.jsxs)("span",{children:["Արտիկուլ: ",e.articul]})]}):null]}),"manual"===j?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",onClick:()=>eo(e.code,-1),disabled:!w,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})}),(0,n.jsxs)("div",{className:"flex-1 text-center",children:[(0,n.jsx)("span",{className:"text-lg font-semibold ".concat(ed(e.current,e.total)),children:e.current}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[" ","/ ",e.total]})]}),(0,n.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",onClick:()=>eo(e.code,1),disabled:!w,children:(0,n.jsx)(c.Z,{className:"h-4 w-4"})})]}):(0,n.jsxs)("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:[e.current," / ",e.total]})]},e.code))})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,n.jsxs)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground px-4 py-2 h-12",onClick:()=>{window.localStorage.setItem(es,JSON.stringify(_.current))},children:[(0,n.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Պահպանել"]}),(0,n.jsxs)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground shadow hover:bg-[#015433]/90 px-4 py-2 h-12",onClick:ei,disabled:W,children:[(0,n.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),W?"Ուղարկվում է...":"Ուղարկել 1C"]})]}),z&&(0,n.jsx)("div",{className:"mt-3 text-sm text-red-600",children:z})]}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,n.jsxs)("div",{className:"p-6 space-y-4",children:[(0,n.jsx)("div",{className:"h-4 w-1/3 rounded bg-muted animate-pulse"}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("div",{className:"h-9 flex-1 rounded-md bg-muted animate-pulse"}),(0,n.jsx)("div",{className:"h-9 flex-1 rounded-md bg-muted animate-pulse"}),(0,n.jsx)("div",{className:"h-9 flex-1 rounded-md bg-muted animate-pulse"})]})]})}),(0,n.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,n.jsx)("div",{className:"p-6 space-y-3",children:[1,2,3].map(e=>(0,n.jsxs)("div",{className:"space-y-3 border-b border-border pb-3 last:border-0 last:pb-0",children:[(0,n.jsxs)("div",{className:"flex justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,n.jsx)("div",{className:"h-4 w-1/2 rounded bg-muted animate-pulse"}),(0,n.jsx)("div",{className:"h-3 w-1/3 rounded bg-muted animate-pulse"})]}),(0,n.jsx)("div",{className:"h-6 w-12 rounded bg-muted animate-pulse"})]}),(0,n.jsx)("div",{className:"h-3 w-3/4 rounded bg-muted animate-pulse"})]},e))})})]})})}),(0,n.jsx)("section",{"aria-label":"Notifications alt+T",tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"})]})}},4984:function(e,t,r){"use strict";r.d(t,{AW:function(){return a},Fv:function(){return s},SH:function(){return u},Sg:function(){return i},X6:function(){return o},xS:function(){return l}});let n="user_email",s="user_manual_allowed",i="https://admin.flexit.am/api".replace(/\/+$/,"")||"http://127.0.0.1:8000/api";function a(e){var t,r;(null===(t=e.user)||void 0===t?void 0:t.email)&&window.localStorage.setItem(n,e.user.email),"boolean"==typeof(null===(r=e.user)||void 0===r?void 0:r.allow_manual_items)&&window.localStorage.setItem(s,String(e.user.allow_manual_items))}function o(){["access_token","refresh_token","access_expires_at",n,s].forEach(e=>window.localStorage.removeItem(e))}async function l(){try{await fetch("".concat(i,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})}catch(e){}finally{o()}}async function c(){let e=await fetch("".concat(i,"/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});return e.ok?(a(await e.json()),!0):(o(),!1)}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(e){let t={};return e instanceof Headers?e.forEach((e,r)=>{t[r]=e}):Array.isArray(e)?e.forEach(e=>{let[r,n]=e;t[r]=n}):e&&Object.assign(t,e),t}(t.headers),n=()=>fetch(e,{...t,credentials:"include",headers:r}),s=await n();if(401===s.status){if(!await c())throw o(),Error("Session expired");s=await n()}return s}}},function(e){e.O(0,[102,971,23,744],function(){return e(e.s=8545)}),_N_E=e.O()}]);
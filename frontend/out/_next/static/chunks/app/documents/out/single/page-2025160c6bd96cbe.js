(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{9286:function(e,t,n){Promise.resolve().then(n.bind(n,5281)),Promise.resolve().then(n.bind(n,912)),Promise.resolve().then(n.bind(n,1481))},4189:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7437);function i(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3Z"}),(0,r.jsx)("circle",{cx:"12",cy:"13",r:"3"})]})}},3602:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7437);function i(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:(0,r.jsx)("path",{d:"M5 12h14"})})}},6023:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7437);function i(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M5 12h14"}),(0,r.jsx)("path",{d:"M12 5v14"})]})}},5495:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7437);function i(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),(0,r.jsx)("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),(0,r.jsx)("path",{d:"M7 3v4a1 1 0 0 0 1 1h7"})]})}},3587:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7437);function i(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),(0,r.jsx)("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),(0,r.jsx)("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),(0,r.jsx)("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"})]})}},84:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7437);function i(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}),(0,r.jsx)("path",{d:"m21.854 2.147-10.94 10.939"})]})}},4771:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7437),i=n(2265),s=n(6463),a=n(4984);let l=()=>!!window.localStorage.getItem(a.Gn);function o(e){let{children:t}=e,n=(0,s.useRouter)(),[o,c]=(0,i.useState)(l);return((0,i.useEffect)(()=>{if(!o){n.replace("/login");return}let e=new AbortController,t=!0,r=!1;return(async()=>{try{if(await (0,a.SH)("".concat(a.Sg,"/auth/me"),{signal:e.signal}),!t)return;c(!0)}catch(i){if(!t||(null==i?void 0:i.name)==="AbortError")return;if(!r&&(r=await (0,a.jb)()))try{await (0,a.SH)("".concat(a.Sg,"/auth/me"),{signal:e.signal});return}catch(e){}(0,a.X6)(),c(!1),n.replace("/login")}})(),()=>{t=!1,e.abort()}},[o,n]),o)?(0,r.jsx)(r.Fragment,{children:t}):null}},5281:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(7437),i=n(2265),s=n(6463),a=n(4364),l=n(4189),o=n(3602),c=n(6023),u=n(5495),d=n(84),m=n(3587),f=n(4771),v=n(4984);let x="orders-data",h=(e,t)=>{var n,r,i,s,a,l,o,c;return String(null!==(c=null!==(o=null!==(l=null!==(a=null!==(s=null!==(i=null!==(r=null!==(n=null==e?void 0:e.Number)&&void 0!==n?n:null==e?void 0:e.DocEntry)&&void 0!==r?r:null==e?void 0:e.DocumentID)&&void 0!==i?i:null==e?void 0:e.DocumentId)&&void 0!==s?s:null==e?void 0:e.ID)&&void 0!==a?a:null==e?void 0:e.Id)&&void 0!==l?l:null==e?void 0:e.DocNum)&&void 0!==o?o:null==e?void 0:e.Guid)&&void 0!==c?c:t)},p=e=>(Array.isArray(null==e?void 0:e.Documents)?e.Documents:[]).map((e,t)=>{var n,r,i,s;return{id:h(e,t),date:(null!==(n=null==e?void 0:e.Date)&&void 0!==n?n:"").split("T")[0]||"",transactionDate:null!==(r=null==e?void 0:e.Date)&&void 0!==r?r:"",title:null!==(i=null==e?void 0:e.ClientName)&&void 0!==i?i:"",clientId:null!==(s=null==e?void 0:e.ClientID)&&void 0!==s?s:"",items:Array.isArray(null==e?void 0:e.Items)?e.Items:[]}});function g(e){let{id:t}=e,n=(0,s.useRouter)(),h=e=>(null!=e?e:"").trim(),g=h(t),[b,w]=(0,i.useState)(!1),[j,y]=(0,i.useState)(void 0);(0,i.useEffect)(()=>{w(!0)},[]),(0,i.useEffect)(()=>{let e=new AbortController,t=!0,n=g?(()=>{try{var e;let t=window.localStorage.getItem(x);if(!t)return null;let n=JSON.parse(t);return null!==(e=n.find(e=>h(e.id)===g))&&void 0!==e?e:null}catch(e){return null}})():null;y(null!=n?n:void 0);let r=async()=>{if(!g){y(null);return}try{var n;let r=await (0,v.SH)("".concat(v.Sg,"/orders"),{signal:e.signal}),i=p(r);if(!t)return;let s=null!==(n=i.find(e=>h(e.id)===g))&&void 0!==n?n:null;y(s);try{window.localStorage.setItem(x,JSON.stringify(i))}catch(e){}}catch(n){if(!t||e.signal.aborted)return;y(e=>void 0===e?null:e)}};return n||r(),()=>{t=!1,e.abort()}},[g]);let[N,k]=(0,i.useState)(!0),[S,_]=(0,i.useState)(!0),[I,C]=(0,i.useState)("manual");(0,i.useEffect)(()=>{let e=window.localStorage.getItem(v.Fv),t=window.localStorage.getItem(v.t3);k("false"!==e),_("false"!==t),"false"===e&&C("device")},[]);let D=(0,i.useMemo)(()=>{var e;let t=null==j?void 0:null===(e=j.items)||void 0===e?void 0:e.map(e=>({code:(null==e?void 0:e.Barcode)||(null==e?void 0:e.ItemID)||"-",barcode:(null==e?void 0:e.Barcode)||"",name:(null==e?void 0:e.Name)||(null==e?void 0:e.ItemID)||"",itemId:(null==e?void 0:e.ItemID)||"",articul:(null==e?void 0:e.Articul)||"",location:(null==e?void 0:e.ItemAddress)||"",total:Number(null==e?void 0:e.Quantity)||0,current:0,stock:0}));return t&&t.length>0?t:[]},[j]),[T,E]=(0,i.useState)(D),M=(0,i.useRef)(D),R=(0,i.useRef)(null),Z=(0,i.useRef)(null),A=(0,i.useRef)(null),L=(0,i.useRef)(null),O=(0,i.useRef)(null),F=(0,i.useRef)(null),[B,z]=(0,i.useState)(null),[P,V]=(0,i.useState)(null),[W,H]=(0,i.useState)(""),[J,q]=(0,i.useState)(null),[G,U]=(0,i.useState)(null),[Q,X]=(0,i.useState)(!1),$=(0,i.useRef)(null),K=(0,i.useRef)({}),Y=(0,i.useRef)(null),ee=(0,i.useRef)(!1),et=(0,i.useRef)(()=>{}),[en,er]=(0,i.useState)(!1),[ei,es]=(0,i.useState)(null),ea=(0,i.useRef)(null),el=(0,i.useRef)(""),eo=(0,i.useRef)(null),ec=(0,i.useRef)(null),eu=(0,i.useMemo)(()=>"out-order-".concat(g||"default"),[g]),ed=async()=>{var e,t,n;if(U(null),!j)return;let r={Number:j.id,ClientID:null!==(e=j.clientId)&&void 0!==e?e:"",TransactionDate:j.transactionDate||j.date,Items:T.filter(e=>e.current>0).map(e=>({ItemID:e.itemId||e.code,Quantity:e.current}))};if(0===r.Items.length){U("Առաքման համար քանակ նշված չէ");return}try{X(!0);let e=await fetch("".concat(v.Sg,"/orders"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!e.ok){let n=await e.text().catch(()=>""),r="Չհաջողվեց ուղարկել (".concat(e.status,")");try{let e=JSON.parse(n);r=null!==(t=null==e?void 0:e.message)&&void 0!==t?t:r}catch(e){n&&(r=n)}throw Error(r)}}catch(e){U(null!==(n=null==e?void 0:e.message)&&void 0!==n?n:"Չհաջողվեց ուղարկել")}finally{X(!1)}};(0,i.useEffect)(()=>{N||"manual"!==I||C("device")},[N,I]);let em=(0,i.useCallback)(e=>{let t=K.current[e];t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),es(e),ea.current&&clearTimeout(ea.current),ea.current=setTimeout(()=>es(null),1200))},[]),ef=(0,i.useCallback)((e,t)=>{E(n=>{let r=n.map(n=>{if(n.code!==e)return n;let r=t>0?t:0,i=t<0?Math.min(Math.abs(t),n.current):0,s=Math.max(0,n.current+r-i),a="number"==typeof n.stock?Math.max(0,n.stock+r-i):n.stock;return{...n,current:s,stock:a}});return M.current=r,r})},[]),ev=(0,i.useCallback)(e=>{let t=e.trim();if(!t)return;let n=M.current.find(e=>e.code===t||e.itemId===t)||null;n?(q(null),em(n.code),ef(n.code,1)):q("Բարկոդը չի գտնվել ցանկում"),H("")},[em,ef]);(0,i.useEffect)(()=>{"device"===I&&$.current&&$.current.focus();let e=e=>{if("device"!==I)return;e.stopPropagation();let t=e.key;if("Enter"===t){e.preventDefault();let t=el.current;el.current="",eo.current&&(clearTimeout(eo.current),eo.current=null),ec.current&&(clearTimeout(ec.current),ec.current=null),ev(t);return}1===t.length&&(el.current+=t,eo.current&&clearTimeout(eo.current),eo.current=setTimeout(()=>{el.current=""},600),ec.current&&clearTimeout(ec.current),ec.current=setTimeout(()=>{let e=el.current;el.current="",e&&ev(e)},900))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e),eo.current&&clearTimeout(eo.current),ec.current&&clearTimeout(ec.current)}},[I,ev]);let ex=(0,i.useCallback)(e=>{if(!D.length)return null!=e?e:[];let t=new Map;return(D.forEach(e=>t.set(e.code||e.itemId,e)),e&&e.length)?e.map(e=>{var n,r;let i=e.code||e.itemId,s=i?t.get(i):void 0;return{...e,barcode:e.barcode||(null==s?void 0:s.barcode)||"",name:e.name||(null==s?void 0:s.name)||"",itemId:e.itemId||(null==s?void 0:s.itemId)||"",articul:e.articul||(null==s?void 0:s.articul)||"",location:e.location||(null==s?void 0:s.location)||"",total:null!==(r=null!==(n=null==s?void 0:s.total)&&void 0!==n?n:e.total)&&void 0!==r?r:0}}):D},[D]),eh=b&&null===j,ep=(e,t)=>e<t?"text-muted-foreground":e===t?"text-[hsl(var(--success))]":"text-[hsl(var(--destructive))]",eg=(e,t)=>e>t?"bg-red-100":e===t?"bg-green-100":"bg-gray-100";return(0,i.useEffect)(()=>{{let e=window.localStorage.getItem(eu);if(e)try{let t=JSON.parse(e);if(Array.isArray(t)){let e=ex(t);E(e),M.current=e;return}}catch(e){}}if(D.length>0){let e=ex(D);E(e),M.current=e}},[eu,D,ex]),(0,i.useEffect)(()=>{let e=e=>{if(ee.current)return;let t=e.trim();if(!t)return;let n=Date.now();if(!Y.current||Y.current.code!==t||!(n-Y.current.time<1e3)){if(z(t),M.current.find(e=>e.code===t)){V(null),ef(t,1),es(t),ea.current&&clearTimeout(ea.current),ea.current=setTimeout(()=>es(null),1200);let e=K.current[t];e&&e.scrollIntoView({behavior:"smooth",block:"center"}),ee.current=!0,setTimeout(()=>{ee.current=!1},1e3)}else V("Բարկոդը չի գտնվել ապրանքների ցանկում");Y.current={code:t,time:n}}},t=async()=>{if(Z.current)return;let t="BarcodeDetector"in window,i=async()=>{try{return await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})}catch(e){return await navigator.mediaDevices.getUserMedia({video:!0})}};try{let s=await i();Z.current=s,R.current&&(R.current.srcObject=s,await R.current.play()),t?await r(e):await n(e)}catch(e){console.error("Camera start failed",e),V("Տեսախցիկը չի միանում․ թույլատրեք հասանելիությունը և փորձեք կրկին")}},n=async e=>{if(!R.current)return;let t=new a.VJ;A.current=t;try{let n=await t.decodeFromVideoDevice(void 0,R.current,(t,n)=>{(null==t?void 0:t.getText())?e(t.getText()):n&&"NotFoundException"!==n.name&&V("Չհաջողվեց ընթերցել բարկոդը")});L.current=n}catch(e){console.error("Camera start failed",e),V("Բարկոդ ընթերցումը հասանելի չէ այս սարքում")}},r=async e=>{if(!("BarcodeDetector"in window))return;F.current||(F.current=new BarcodeDetector({formats:["code_128","ean_13","ean_8","qr_code"]}));let t=async()=>{if(R.current&&F.current){try{let t=await F.current.detect(R.current);if(t.length>0){var n;let r=null!==(n=t[0].rawValue)&&void 0!==n?n:"";e(r)}}catch(e){V("Չհաջողվեց ընթերցել բարկոդը")}O.current=requestAnimationFrame(t)}};t()},i=()=>{var e;O.current&&(cancelAnimationFrame(O.current),O.current=null),(null===(e=L.current)||void 0===e?void 0:e.stop)&&(L.current.stop(),L.current=null),Z.current&&(Z.current.getTracks().forEach(e=>e.stop()),Z.current=null),R.current&&(R.current.srcObject=null),F.current=null,z(null),V(null),Y.current=null,ee.current=!1,ea.current&&(clearTimeout(ea.current),ea.current=null)};return et.current=i,"camera"===I&&en?t():i(),i},[I,en,ef]),(0,i.useEffect)(()=>{M.current=T},[T]),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("div",{className:"App",children:(0,r.jsx)("main",{className:"container mx-auto px-4 py-6 pb-20",children:b&&void 0!==j?eh?(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,r.jsxs)("div",{className:"p-6 pt-6 text-center space-y-3",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:"Փաստաթուղթը չի գտնվել"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Վերադարձեք Ելքերի ցուցակ և ընտրեք փաստաթուղթը նորից։"}),(0,r.jsx)("button",{onClick:()=>n.push("/documents/out"),className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md border border-border bg-card px-4 py-2 text-sm font-medium text-foreground shadow-sm transition-colors hover:bg-accent hover:text-accent-foreground",children:"Վերադառնալ"})]})})}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,r.jsx)("div",{className:"p-6 pt-6",children:(0,r.jsxs)("div",{dir:"ltr","data-orientation":"horizontal",className:"w-full",children:[(0,r.jsxs)("div",{role:"tablist","aria-orientation":"horizontal",className:"h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground grid w-full ".concat(N?"grid-cols-3":"grid-cols-2"),children:[N&&(0,r.jsxs)("button",{type:"button",role:"tab","aria-selected":"manual"===I,"data-state":"manual"===I?"active":"inactive",onClick:()=>C("manual"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,r.jsx)(c.Z,{className:"h-3.5 w-3.5 mr-1"}),"Ձեռքով"]}),(0,r.jsxs)("button",{type:"button",role:"tab","aria-selected":"camera"===I,"data-state":"camera"===I?"active":"inactive",onClick:()=>C("camera"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,r.jsx)(l.Z,{className:"h-3.5 w-3.5 mr-1"}),"Տեսախցիկ"]}),(0,r.jsxs)("button",{type:"button",role:"tab","aria-selected":"device"===I,"data-state":"device"===I?"active":"inactive",onClick:()=>C("device"),className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow text-xs",children:[(0,r.jsx)(m.Z,{className:"h-3.5 w-3.5 mr-1"}),"Սարք"]})]}),S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("form",{className:"mt-3 flex gap-2",onSubmit:e=>{e.preventDefault(),ev(W),"device"===I?setTimeout(()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.focus()},0):N&&C("manual")},children:[(0,r.jsx)("input",{ref:$,className:"flex-1 rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",placeholder:"device"===I?"Սկանավորեք սարքով":"Մուտքագրեք բարկոդը",autoFocus:"device"===I,value:W,onChange:e=>H(e.target.value)}),(0,r.jsx)("button",{type:"submit",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-2 text-sm font-medium bg-primary text-primary-foreground shadow hover:bg-primary/90",children:"Գտնել"})]}),J&&(0,r.jsx)("p",{className:"mt-2 text-xs text-red-600",children:J})]})]})})}),(0,r.jsxs)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:[(0,r.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 pb-3",children:(0,r.jsx)("div",{className:"font-semibold tracking-tight text-base",children:"Ապրանքներ"})}),(0,r.jsxs)("div",{className:"p-0 space-y-0",children:["camera"===I&&(0,r.jsxs)("div",{className:"sticky top-0 z-50 relative border-b border-border bg-black text-white",children:[(0,r.jsx)("div",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-black/70",children:(0,r.jsxs)("button",{type:"button",onClick:()=>er(e=>!e),className:"inline-flex items-center gap-2 rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-black shadow transition hover:scale-[1.02] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-black focus-visible:ring-yellow-400",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),en?"Անջատել":"Միացնել տեսախցիկը"]})}),en?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("video",{ref:R,className:"w-full rounded-b-xl aspect-video object-cover bg-black",playsInline:!0,autoPlay:!0,muted:!0}),(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-40 w-64 rounded-md border-2 transition-colors duration-150 ".concat(B?"border-green-400 shadow-[0_0_0_2px_rgba(34,197,94,0.35)]":"border-yellow-400 shadow-[0_0_0_2px_rgba(250,204,21,0.35)]")})})]}):(0,r.jsx)("div",{className:"w-full rounded-b-xl bg-black/80 aspect-video flex items-center justify-center text-xs text-white/70",children:"Սկսեք սկանավորումը"}),(0,r.jsxs)("div",{className:"px-4 py-2 text-xs text-white/80 flex justify-between",children:[(0,r.jsx)("span",{children:B?"Գտնված բարկոդը: ".concat(B):en?"Սկանավորում...":"Տեսախցիկը անջատված է"}),P&&(0,r.jsx)("span",{className:"text-red-400",children:P})]})]}),(0,r.jsx)("div",{className:"space-y-0",children:T.map(e=>(0,r.jsxs)("div",{ref:t=>{K.current[e.code]=t},className:"p-4 space-y-3 border-b border-border last:border-none ".concat(eg(e.current,e.total)," ").concat(ei===e.code?"ring-2 ring-success-light/40":""),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("div",{className:"text-sm font-semibold text-foreground",children:e.name||e.itemId||"Անվանում չկա"})}),(0,r.jsx)("div",{className:"flex flex-col items-end gap-1 text-xs text-muted-foreground",children:(0,r.jsx)("div",{className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 bg-muted text-muted-foreground border-border shrink-0",children:(0,r.jsxs)("span",{className:ep(e.current,e.total),children:[e.current,"/",e.total]})})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[(0,r.jsxs)("span",{children:["Կոդ: ",e.itemId||e.code]}),e.barcode?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["Բարկոդ: ",e.barcode]})]}):null,e.location?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["Հասցե: ",e.location]})]}):null,e.articul?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:["Արտիկուլ: ",e.articul]})]}):null]}),"manual"===I?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",onClick:()=>ef(e.code,-1),disabled:!N,children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex-1 text-center",children:[(0,r.jsx)("span",{className:"text-lg font-semibold ".concat(ep(e.current,e.total)),children:e.current}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[" ","/ ",e.total]})]}),(0,r.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",onClick:()=>ef(e.code,1),disabled:!N,children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:[e.current," / ",e.total]})]},e.code))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,r.jsxs)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input shadow-sm hover:bg-accent hover:text-accent-foreground px-4 py-2 h-12",onClick:()=>{window.localStorage.setItem(eu,JSON.stringify(M.current))},children:[(0,r.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Պահպանել"]}),(0,r.jsxs)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground shadow hover:bg-[#015433]/90 px-4 py-2 h-12",onClick:ed,disabled:Q,children:[(0,r.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),Q?"Ուղարկվում է...":"Ուղարկել 1C"]})]}),G&&(0,r.jsx)("div",{className:"mt-3 text-sm text-red-600",children:G})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsx)("div",{className:"h-4 w-1/3 rounded bg-muted animate-pulse"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"h-9 flex-1 rounded-md bg-muted animate-pulse"}),(0,r.jsx)("div",{className:"h-9 flex-1 rounded-md bg-muted animate-pulse"}),(0,r.jsx)("div",{className:"h-9 flex-1 rounded-md bg-muted animate-pulse"})]})]})}),(0,r.jsx)("div",{className:"rounded-xl border bg-card text-card-foreground shadow",children:(0,r.jsx)("div",{className:"p-6 space-y-3",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"space-y-3 border-b border-border pb-3 last:border-0 last:pb-0",children:[(0,r.jsxs)("div",{className:"flex justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 w-1/2 rounded bg-muted animate-pulse"}),(0,r.jsx)("div",{className:"h-3 w-1/3 rounded bg-muted animate-pulse"})]}),(0,r.jsx)("div",{className:"h-6 w-12 rounded bg-muted animate-pulse"})]}),(0,r.jsx)("div",{className:"h-3 w-3/4 rounded bg-muted animate-pulse"})]},e))})})]})})}),(0,r.jsx)("section",{"aria-label":"Notifications alt+T",tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false"})]})}function b(){let e=(0,s.useSearchParams)().get("id")||void 0;return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(g,{id:e})})}},4984:function(e,t,n){"use strict";n.d(t,{AW:function(){return l},Fv:function(){return i},Gn:function(){return r},SH:function(){return d},Sg:function(){return a},X6:function(){return o},jb:function(){return u},t3:function(){return s},xS:function(){return c}});let r="user_email",i="user_manual_allowed",s="user_manual_text_allowed",a="https://admin.flexit.am/api".replace(/\/+$/,"")||"https://admin.flexit.am/api";function l(e){var t,n,a;(null===(t=e.user)||void 0===t?void 0:t.email)&&window.localStorage.setItem(r,e.user.email),"boolean"==typeof(null===(n=e.user)||void 0===n?void 0:n.allow_manual_items)&&window.localStorage.setItem(i,String(e.user.allow_manual_items)),"boolean"==typeof(null===(a=e.user)||void 0===a?void 0:a.allow_manual_text_input)&&window.localStorage.setItem(s,String(e.user.allow_manual_text_input))}function o(){["access_token","refresh_token","access_expires_at",r,i,s].forEach(e=>window.localStorage.removeItem(e))}async function c(){try{await fetch("".concat(a,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})}catch(e){}finally{o()}}async function u(){let e=await fetch("".concat(a,"/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});return e.ok?(l(await e.json()),!0):(o(),!1)}async function d(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.startsWith("http")?e:"".concat(a).concat(e.startsWith("/")?"":"/").concat(e),i={...n,cache:null!==(t=n.cache)&&void 0!==t?t:"no-store",credentials:"include",headers:{"Content-Type":"application/json",...n.headers||{}}},s=await fetch(r,i);if(401===s.status)throw Error("Unauthorized");if(!s.ok){let e=await s.text();throw Error("Request failed (".concat(s.status,"): ").concat(e))}if(204===s.status)return;let l=await s.text();try{return l?JSON.parse(l):void 0}catch(e){return l}}}},function(e){e.O(0,[149,971,23,744],function(){return e(e.s=9286)}),_N_E=e.O()}]);
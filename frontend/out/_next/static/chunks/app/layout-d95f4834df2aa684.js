(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3355:function(e,n,t){Promise.resolve().then(t.bind(t,7850)),Promise.resolve().then(t.t.bind(t,7496,23)),Promise.resolve().then(t.t.bind(t,8877,23))},7850:function(e,n,t){"use strict";t.d(n,{default:function(){return u}});var i=t(7437),s=t(7138),o=t(6463);function r(e){return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",...e,children:(0,i.jsx)("path",{d:"m15 18-6-6 6-6"})})}t(2265);var a=function(e){return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-key-round h-4 w-4","aria-hidden":"true",...e,children:[(0,i.jsx)("path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}),(0,i.jsx)("circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"})]})},l=function(e){return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-log-out h-4 w-4","aria-hidden":"true",...e,children:[(0,i.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,i.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,i.jsx)("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]})},c=t(4984);function u(){let e=(0,o.useRouter)(),n=(0,o.usePathname)()||"/";if(n.startsWith("/login")||n.startsWith("/api/auth"))return null;let t=n.startsWith("/documents/in")?"Մուտքեր":n.startsWith("/documents/out")?"Ելքեր":n.startsWith("/password")?"Գաղտնաբառ":"/"===n?"Գլխավոր էջ":"Flexit տերմինալ";return(0,i.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-border bg-card shadow-sm",children:(0,i.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:["/"!==n&&(0,i.jsx)("button",{onClick:()=>e.back(),className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",children:(0,i.jsx)(r,{className:"h-5 w-5"})}),(0,i.jsx)("h1",{className:"text-lg font-semibold text-foreground",children:t})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(s.default,{href:"/password",className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",children:(0,i.jsx)(a,{className:"h-4 w-4"})}),(0,i.jsx)("button",{className:"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground rounded-md text-xs h-9 w-9 p-0",onClick:()=>{(0,c.xS)().finally(()=>e.replace("/login"))},children:(0,i.jsx)(l,{className:"h-4 w-4"})})]})]})})}},4984:function(e,n,t){"use strict";t.d(n,{AW:function(){return a},Fv:function(){return s},SH:function(){return d},Sg:function(){return r},X6:function(){return l},t3:function(){return o},xS:function(){return c}});let i="user_email",s="user_manual_allowed",o="user_manual_text_allowed",r="http://localhost:8000/api".replace(/\/+$/,"")||"http://127.0.0.1:8000/api";function a(e){var n,t,r;(null===(n=e.user)||void 0===n?void 0:n.email)&&window.localStorage.setItem(i,e.user.email),"boolean"==typeof(null===(t=e.user)||void 0===t?void 0:t.allow_manual_items)&&window.localStorage.setItem(s,String(e.user.allow_manual_items)),"boolean"==typeof(null===(r=e.user)||void 0===r?void 0:r.allow_manual_text_input)&&window.localStorage.setItem(o,String(e.user.allow_manual_text_input))}function l(){["access_token","refresh_token","access_expires_at",i,s,o].forEach(e=>window.localStorage.removeItem(e))}async function c(){try{await fetch("".concat(r,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})}catch(e){}finally{l()}}async function u(){let e=await fetch("".concat(r,"/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});return e.ok?(a(await e.json()),!0):(l(),!1)}async function d(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=function(e){let n={};return e instanceof Headers?e.forEach((e,t)=>{n[t]=e}):Array.isArray(e)?e.forEach(e=>{let[t,i]=e;n[t]=i}):e&&Object.assign(n,e),n}(n.headers),i=()=>fetch(e,{...n,credentials:"include",headers:t}),s=await i();if(401===s.status){if(!await u())throw l(),Error("Session expired");s=await i()}return s}},8877:function(){}},function(e){e.O(0,[378,344,971,23,744],function(){return e(e.s=3355)}),_N_E=e.O()}]);